modules:
  - type: files
    files:
      - source: system
        destination: /

  - type: bling
    install:
      - dconf-update-service

  - type: dnf
    repos:
      files:
        - brave-browser.repo
        - 1password.repo
        - vscode.repo
        - mullvad.repo
      copr:
        - scottames/ghostty
        - sneexy/zen-browser
        - atim/starship
      keys:
        - https://brave-browser-rpm-release.s3.brave.com/brave-core.asc
        - https://downloads.1password.com/linux/keys/1password.asc
        - https://packages.microsoft.com/keys/microsoft.asc
    optfix:
      - zen
      - 1Password
      - brave.com
      - Mullvad
    install:
      packages:
        - ghostty
        - code
        - 1password
        - zen-browser
        - brave-browser
        - starship
        - mullvad-vpn

  - type: default-flatpaks
    notify: false
    system:
      install:
        - com.discordapp.Discord
        - com.heroicgameslauncher.hgl
        - com.usebottles.bottles
        - com.vysp3r.ProtonPlus
        - com.github.tchx84.Flatseal
        - com.github.Matoking.protontricks
        - io.missioncenter.MissionCenter
        - io.github.dvlv.boxbuddyrs
        - io.github.Foldex.AdwSteamGtk
        - com.bitwarden.desktop
      remove:
        - org.mozilla.firefox

  - type: systemd
    system:
      enabled:
        - podman.socket

  - type: fonts
    fonts:
      nerd-fonts:
        - 0xProto

  - type: script
    snippets:
     - "chown -R 0:0 /usr/lib/opt/zen" # Fix zen not connecting to 1Password
     - "chown root:root /etc/1password/custom_allowed_browsers && chmod 755 /etc/1password/custom_allowed_browsers"